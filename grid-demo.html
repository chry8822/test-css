<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grid Auto-fit 예시</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 2rem;
            background: #f5f5f5;
        }

        .container {
            background: white;
            padding: 2rem;
            margin-bottom: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, 280px);
            gap: 1rem;
            border: 2px dashed #007bff;
            padding: 1rem;
            background: #f0f8ff;
        }

        .item {
            background: #007bff;
            color: white;
            padding: 2rem 1rem;
            text-align: center;
            border-radius: 4px;
            font-weight: bold;
        }

        .width-control {
            margin: 1rem 0;
        }

        .width-control input {
            width: 100%;
            margin: 0.5rem 0;
        }

        .info {
            background: #e7f3ff;
            padding: 1rem;
            border-radius: 4px;
            margin: 1rem 0;
            border-left: 4px solid #007bff;
        }

        /* 크기별 데모 */
        .demo-1200 { width: 1200px; max-width: 100%; }
        .demo-900 { width: 900px; max-width: 100%; }
        .demo-600 { width: 600px; max-width: 100%; }
        .demo-300 { width: 300px; max-width: 100%; }
        .demo-250 { width: 250px; max-width: 100%; }
    </style>
</head>
<body>
    <h1>🎯 Grid Auto-fit 동작 원리</h1>
    
    <div class="container">
        <h2>1200px 컨테이너 (4개 컬럼)</h2>
        <div class="info">
            1200px ÷ 280px = 4.28개 → 4개 컬럼<br>
            남은 공간: 1200px - (280px × 4) = 80px<br>
            각 컬럼: 280px + 20px = 300px
        </div>
        <div class="grid demo-1200">
            <div class="item">카드 1<br>300px</div>
            <div class="item">카드 2<br>300px</div>
            <div class="item">카드 3<br>300px</div>
            <div class="item">카드 4<br>300px</div>
        </div>
    </div>

    <div class="container">
        <h2>900px 컨테이너 (3개 컬럼)</h2>
        <div class="info">
            900px ÷ 280px = 3.21개 → 3개 컬럼<br>
            남은 공간: 900px - (280px × 3) = 60px<br>
            각 컬럼: 280px + 20px = 300px
        </div>
        <div class="grid demo-900">
            <div class="item">카드 1<br>300px</div>
            <div class="item">카드 2<br>300px</div>
            <div class="item">카드 3<br>300px</div>
        </div>
    </div>

    <div class="container">
        <h2>600px 컨테이너 (2개 컬럼)</h2>
        <div class="info">
            600px ÷ 280px = 2.14개 → 2개 컬럼<br>
            남은 공간: 600px - (280px × 2) = 40px<br>
            각 컬럼: 280px + 20px = 300px
        </div>
        <div class="grid demo-600">
            <div class="item">카드 1<br>300px</div>
            <div class="item">카드 2<br>300px</div>
        </div>
    </div>

    <div class="container">
        <h2>300px 컨테이너 (1개 컬럼)</h2>
        <div class="info">
            300px ÷ 280px = 1.07개 → 1개 컬럼<br>
            남은 공간: 300px - (280px × 1) = 20px<br>
            각 컬럼: 280px + 20px = 300px
        </div>
        <div class="grid demo-300">
            <div class="item">카드 1<br>300px</div>
        </div>
    </div>

    <div class="container">
        <h2>⚠️ 250px 컨테이너 (오버플로우 발생)</h2>
        <div class="info" style="background: #ffe6e6; border-color: #ff4444;">
            250px ÷ 280px = 0.89개 → 1개 컬럼 강제 배치<br>
            컨테이너보다 카드가 커서 오버플로우 발생!<br>
            카드 크기: 250px (280px에서 축소됨)
        </div>
        <div class="grid demo-250">
            <div class="item">카드 1<br>250px<br>(오버플로우)</div>
        </div>
    </div>

    <div class="container">
        <h2>🔧 인터랙티브 테스트</h2>
        <div class="width-control">
            <label for="widthSlider">컨테이너 너비: <span id="widthValue">800</span>px</label>
            <input type="range" id="widthSlider" min="200" max="1400" value="800" step="50">
        </div>
        <div class="info" id="calculation"></div>
        <div class="grid" id="interactiveGrid">
            <div class="item">카드 1</div>
            <div class="item">카드 2</div>
            <div class="item">카드 3</div>
            <div class="item">카드 4</div>
            <div class="item">카드 5</div>
        </div>
    </div>

    <script>
        const slider = document.getElementById('widthSlider');
        const widthValue = document.getElementById('widthValue');
        const calculation = document.getElementById('calculation');
        const interactiveGrid = document.getElementById('interactiveGrid');

        function updateGrid() {
            const width = parseInt(slider.value);
            const cardWidth = 280;
            const gap = 16; // 1rem = 16px
            
            // 실제 사용 가능한 너비 계산 (gap 고려)
            const maxColumns = Math.floor((width + gap) / (cardWidth + gap));
            const actualColumns = Math.max(1, maxColumns);
            
            // 남은 공간 계산
            const usedWidth = actualColumns * cardWidth + (actualColumns - 1) * gap;
            const remainingSpace = width - usedWidth;
            const extraPerColumn = actualColumns > 0 ? remainingSpace / actualColumns : 0;
            const finalColumnWidth = cardWidth + extraPerColumn;

            widthValue.textContent = width;
            interactiveGrid.style.width = width + 'px';
            
            calculation.innerHTML = `
                <strong>계산 과정:</strong><br>
                ${width}px ÷ ${cardWidth}px = ${(width / cardWidth).toFixed(2)}개<br>
                → ${actualColumns}개 컬럼 배치<br>
                사용된 공간: ${usedWidth}px<br>
                남은 공간: ${remainingSpace}px<br>
                각 컬럼 최종 크기: ${finalColumnWidth.toFixed(1)}px
            `;
        }

        slider.addEventListener('input', updateGrid);
        updateGrid();
    </script>
</body>
</html>
